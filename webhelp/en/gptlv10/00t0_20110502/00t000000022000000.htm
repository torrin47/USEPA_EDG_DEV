<html lang="en" xml:lang="en"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Add a Custom Profile Add a Custom Profile This topic describes how the Geoportal web application supports its default metadata profiles, and how it can be configured to support additional metadata profiles. First, we will discuss the process of how a discoverable metadata document is created and published to the geoportal. Then, we will describe the profile customization process step by step. Process of creating a discoverable metadata document Before you customize the geoportal schema files to create a custom profile, first it is necessary to understand what happens behind the scenes to create a discoverable metadata document. Most of the files used to"><meta name="content-language" content="en"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>Geoportal Server - Add a Custom Profile</title><script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".html");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    self.location.replace ("../index.html#//" + fname);
                </script></head><!--Publication GUID: [GUID-4DA02BE7-AD9D-4B8F-8F2F-03A1389F0D20]--><!--Topic GUID: [GUID-44A4FBE2-D442-4210-ACFF-FBA0A726440D]--><body><div id="content"><div class="header"><h1>Add a Custom Profile</h1><div id="breadcrumb"></div></div>
		<div class="section1" id="ESRI_SECTION1_FBE2E650CD984281BDE04B5C87553A10" purpose="section1"><h2>Add a Custom Profile</h2><p id="GUID-D4AD5783-F437-446C-924D-3013BF9D7727">This topic describes how the geoportal web application supports its default metadata profiles, and how it can be configured to support additional metadata profiles.  First, we will discuss the process of how a discoverable metadata document is   created and published to the geoportal. Then, we will describe the profile customization process step by step.</p><div class="section2" id="ESRI_SECTION2_D2D1EF5B5EE44A8D81CCFBDAB4A211DE" purpose="section2"><h3>Process of creating a discoverable metadata document</h3><p id="GUID-23B639BC-3EC5-4FA8-89B1-533700D9477C">  Before you customize the geoportal schema files to create a custom profile, first it is necessary to understand what happens behind the scenes to create a discoverable metadata document. Most of the files used to define the metadata profiles and how they are indexed for searching are located in the <i>\\geoportal\WEB-INF\classes\gpt\metadata</i> folder of the geoportal web application.  Files that pertain to a specific profile are found in subfolders organized by the name of the profile which they support (e.g., files defining the ISO-based profiles are in the <i>iso</i> subfolder,  files defining the fgdc profile are in the <i>fgdc</i> subfolder, etc.). The steps and graphic below provide an overview of how these files work together with the user workflow to create a metadata document. <ol purpose="ol" id="OL_34A26838E90146808EC25EAE911DAA44"><li purpose="li" id="LI_8B94316909144E81814058AB18BA3460">A publisher user logs in to the geoportal, clicks the <span class="uicontrol">Administration</span> tab in the geoportal interface, clicks the <span class="uicontrol">Add</span> link on the <span class="uicontrol">Manage Resources</span> page, and the selects the <span class="uicontrol">Use dedicated editor to create metadata manually</span> radio button.</li><li purpose="li" id="LI_9DC97F9E34344537A30F7D8F9841FBA5">The <span class="uicontrol">Create Metadata</span> page loads, reading the available metadata profiles from a file called <i>schemas.xml</i> and displaying them for the publisher to choose.</li><li purpose="li" id="LI_BDF69671837B4FF5A4DD227114D636DC">The publisher chooses one of the profiles from the list.</li><li purpose="li" id="LI_7A834168DB10495D80807D58C8D40F21">The geoportal loads the metadata editor form that corresponds to that profile. The fields of the form are defined by that profile's<i>definition.xml</i> file.  The <i>defintion.xml</i> file reads string values from the <i>gpt.properties</i> file.</li><li purpose="li" id="LI_27C21AABE4F74851A1919FB07DC3CA8F">The publisher inputs information about the resource he/she is describing into the form, and clicks the <span class="uicontrol">Save</span> button at the bottom.</li><li purpose="li" id="LI_AA1B374E264348DB9FCCB082E249D95D">Upon saving, the geoportal validates that all parameters that are designated as mandatory in the <i>definition.xml</i> file have been filled out in the form.  If the <i>definition.xml</i> file contains an <i>xsd</i> reference, the geoportal also validates that the information satisfies the requirements of the xsd.  If the document passes these validations, then the geoportal writes the metadata content into a metadata XML document, using a template. The template comes from the <i>template.xml</i> file for that profile.  The metadata XML document is stored in the local geoportal catalog.</li><li purpose="li" id="LI_BEFB03B638774C838D31089133B970AB">When an administrator approves the resource, the geoportal indexes the content of the metadata XML for search using the Lucene index.  The geoportal uses that profile's <i>indexables.xml</i> file to define which elements should be indexed, and the <i>property-meanings.xml</i> file to define how those elements should be indexed.</li><li purpose="li" id="LI_F030E7CB4C71490CB163245522A5B99D">When users search the geoportal for approved metadata content, the geoportal uses the Lucene index to look up indexed search terms from the metadata XML.  The matching documents are retrieved from the geoportal catalog.</li></ol>
					<img purpose="img" placement="inline" alt="" title="" src="00t0/GUID-1E8E2630-431A-4D74-9295-EE54034539ED-web.png">In the process above, several files were identified that were important for creating a discoverable metadata document. There is an additional file that is also important called <i>sample-schema.xml</i>. The locations and basic descriptions of these files are shown in the table below. <div class="block_table" id="TABLE_F96D2ABBB3E247769B733324826357B1" purpose="block_table"><span class="table_title"></span><table class="table"><colgroup width="*"></colgroup><colgroup width="*"></colgroup><colgroup width="*"></colgroup><tr purpose="thead"><th class="th" purpose="th" rowspan="1" colspan="1">
										<p id="GUID-73F90557-BD7B-4E70-8FC0-E847EED92D4F">Filename</p>
									</th><th class="th" purpose="th" rowspan="1" colspan="1">
										<p id="GUID-BEBED20D-7513-4153-9791-1A1997B4F85D">Description </p>
									</th><th class="th" purpose="th" rowspan="1" colspan="1">
										<p id="GUID-4A113BAB-F696-44C4-B28E-BCB1931A808E">Location </p>
									</th></tr>
								<tr purpose="row"><td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-DA91852C-321D-48A0-956E-E05660E80655">sample-schema.xml </p>
									</td><td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-E63F7A7C-29DB-4902-BC62-1985F77289F2">Defines the terms and schema for the definition.xml file. <div class="notes" id="GUID-2519BC1F-BF6B-4884-B08E-AE8508D6BBBF"><div class="tip"><img class="note_img" src="rsrc/tip.png" alt="Tip" title="Tip"><span>Tip:</span></div><div class="tipbody"><p id="GUID-C2629419-67A5-47D1-ACE8-5ADF91853D7D"> use this file as a reference when creating or altering a definition.xml file.</p></div></div></p>
									</td><td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-9AB705B0-DFF4-46F8-97BB-B1AFDF18F5EC">\\geoportal\WEB-INF\classes\gpt\metadata</p>
									</td></tr><tr purpose="row">
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-94F23C3F-68B0-40AE-BFB4-C6194D836A1D">schemas.xml</p>
									</td>
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-F137DB1E-12AF-4702-A349-9372EF74CEA5">Defines the list of available profiles the publisher user can choose from on the  <span class="uicontrol">Create Metadata</span> page. There is only one schemas.xml file, which contains references to each available standard</p>
									</td>
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-A56F75A0-E7F3-425E-BFF6-27AE69C95321">\\geoportal\WEB-INF\classes\gpt\metadata</p>
									</td>
								</tr>
								<tr purpose="row">
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-490322E9-12D4-418F-978C-F97921382AF1">*template.xml</p>
									</td>
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-3A411A30-46E1-497D-A940-AC224E999AAD">A metadata XML file that follows the structure of the standard, but is not populated with values. It is a template that the geoportal will populate with information the user enters in the online form</p>
									</td>
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-45176BCF-CF4F-4634-9940-FC8D10F19750">\\geoportal\WEB-INF\classes\gpt\metadata\&lt;profile&gt;\</p>
									</td>
								</tr>
								<tr purpose="row">
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-58A6490B-9A62-4882-92E4-05A1BC4AAC10">*definition.xml </p>
									</td>
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-85E44183-E0B5-47EB-97B5-D382C4FBE53A">Defines the elements and their appearance on the online form, and directs the geoportal how to map information from the form to the template metadata document. This file also defines the validation rules for that profile, and will also define what information is displayed for the record in search results when the user clicks <span class="uicontrol">Details</span></p>
									</td>
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-B30BCF26-66AF-4F2F-9A59-CAB58B7DDB90">\\geoportal\WEB-INF\classes\gpt\metadata\&lt;profile&gt;</p>
									</td>
								</tr>
								<tr purpose="row">
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-4BE913A7-78CD-41C2-AA67-AD9A86D8FB0B">gpt.properties </p></td>
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-BB5CD245-CFD6-4685-AB9F-240E1EF3677F">Defines label key values for the metadata editor's user interface and the values written to the output metadata document</p>
									</td>
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-3BCA3260-8035-4E99-B3A4-1E0B42D2CBF2">\\geoportal\WEB-INF\classes\gpt\resources</p>
									</td>
								</tr>
								<tr purpose="row"><td purpose="entry" rowspan="1" colspan="1"><p id="GUID-6CD16D08-D2EC-49CA-83A9-565B4909EDDA">*indexables.xml</p></td><td purpose="entry" rowspan="1" colspan="1"><p id="GUID-83EB687B-D7C5-4623-ACF2-D952A8FF09AE">Maps the property-meanings that should be applied to certain metadata elements to the xpath where that element can be found</p></td><td purpose="entry" rowspan="1" colspan="1"><p id="GUID-4CFCD690-1E32-4CD9-B372-CD8955206F86">\\geoportal\WEB-INF\classes\gpt\metadata\&lt;profile&gt;</p></td></tr><tr purpose="row">
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-E684DADE-695B-42DB-9B3F-AAF1105C95FF">property-meanings.xml </p>
									</td>
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-06B6862D-BBE0-4AA9-9564-D724E2E8BBAA">Defines property-meanings used to index metadata elements identified by the *indexables.xml file so they can be discovered through geoportal search </p>
									</td>
									<td purpose="entry" rowspan="1" colspan="1">
										<p id="GUID-D7D20D1C-5A4D-434A-99C0-BF1647A746E4">\\geoportal\WEB-INF\classes\gpt\metadata</p>
									</td>
								</tr>
								<tr purpose="row">
									<td purpose="entry" rowspan="1" colspan="3">
										<p id="GUID-78D5A80D-242B-4FB8-87D9-713F8598DB01"> * <i>template.xml</i>, <i>definition.xml</i>, and <i>indexables.xml</i> files will have a prefix that serves to identify them for their specific profile. For example, the prefix "dc" is seen with files of the Dublin Core profile, found in the "dc" folder within the \\geoportal\WEB-INF\classes\gpt\metadata directory, such as <i>dc-definition.xml</i>, <i>dc-template.xml</i>, and <i>dc-indexables.xml</i>.</p>
									</td>
								</tr>
							</table><span class="table_desc"></span></div><div class="notes" id="GUID-11C32B98-43F0-4BA7-AC9D-949F8E48167E"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Note" title="Note"><span>Note:</span></div><div class="tipbody"><p id="GUID-93C563F4-41D1-4843-8B16-C9139E51507A">You will notice that there are <i>definition.xml</i> file references in the <i>schemas.xml</i> that are not associated with a <i>template.xml</i> file. For example, in <i>schemas.xml</i> there is a reference to the   <i>opensearch-definition.xml</i> file, from the <i>\\gpt\metadata\other</i> directory. If you open the <i>opensearch-definition.xml</i> file in a text editor, you notice that there is no reference to a <i>template.xml</i> file. This is the same for the <i>georss-definition.xml</i> file which is also in that same directory.  These files are used to generate metadata when the <a class="xref" rel="00t0/00t00000000n000000.htm#GUID-B6BC8579-36DD-44A1-8EF3-67EF05FDC250" href="00t0/00t00000000n000000.htm#GUID-B6BC8579-36DD-44A1-8EF3-67EF05FDC250">Register a resource on the network</a> publish method is chosen. Instead of a <i>template.xml</i> file, an xslt transformation is applied. In the opensearch and georss cases, the default transformation is to Dublin Core, using the file <i>opensearch-toDC.xslt</i> or <i>georss-toDC.xslt</i> transformations.  A similar transformation is applied when OGC GetCapabilities documents are transformed into discoverable metadata for viewing in the geoportal web interface. The transformations for the OGC  GetCapabilities documents are found in the <i>\\gpt\metadata\ogc</i> directory.</p><p id="GUID-5FE93901-4493-4BF6-BE4B-0E02A1D4ABB7">Using transformations, is possible to transform resources into any XML structure, not just formal metadata such as ISO, FGDC, or Dublin Core.</p></div></div></p></div><div class="section2" id="ESRI_SECTION2_ED004CA4E23B44CFA1520CB8101379EA" purpose="section2"><h3>Profile Customization Process, Step-by-Step</h3><p id="GUID-CF838E60-CBB0-4F96-95DE-E2E2698E36E2">The process for customizing the geoportal to support a new profile is defined in  the following subsections. <ul purpose="ul" id="UL_7723C38CB5E44391ACA59F9AE3C0C762">
						<li purpose="li" id="LI_9797CF4EE2F74A8FB8006F3490842B8D"><a class="xref" rel="00t0/00t000000022000000.htm#ESRI_SECTION3_8A3C2C5BEF524279905DAA7023EDA917" href="00t0/00t000000022000000.htm#ESRI_SECTION3_8A3C2C5BEF524279905DAA7023EDA917">Develop a plan for your profile</a></li><li purpose="li" id="LI_E79E69A5B1C144AD8955F2FB401B8A2E"><a class="xref" rel="00t0/00t000000022000000.htm#ESRI_SECTION3_99354D0A04FE4BFDB9C72C50EC575718" href="00t0/00t000000022000000.htm#ESRI_SECTION3_99354D0A04FE4BFDB9C72C50EC575718">Copy the required files</a></li>
						<li purpose="li" id="LI_8E774CDEE4864999B00D819F6F71F4DF"><a class="xref" rel="00t0/00t000000022000000.htm#ESRI_SECTION3_7963BCB64B5F4E68B0E0E54FA03D35AB" href="00t0/00t000000022000000.htm#ESRI_SECTION3_7963BCB64B5F4E68B0E0E54FA03D35AB">Update your template.xml file</a></li>
						<li purpose="li" id="LI_C53782D6818347F6A58DC4BA2CE3B33B"><a class="xref" rel="00t0/00t000000022000000.htm#ESRI_SECTION3_07E37D5774B847A6AB50EC530B2F3C4C" href="00t0/00t000000022000000.htm#ESRI_SECTION3_07E37D5774B847A6AB50EC530B2F3C4C">Update your definition.xml file</a></li>
						<li purpose="li" id="LI_D0128D2738384394BA76792BBB140ED1"><a class="xref" rel="00t0/00t000000022000000.htm#ESRI_SECTION3_B150412626794FCC8A14858B23810B20" href="00t0/00t000000022000000.htm#ESRI_SECTION3_B150412626794FCC8A14858B23810B20">Update gpt.properties</a></li>
						<li purpose="li" id="LI_66BC31ED2AC94D20B1B49A3A542EB591"><a class="xref" rel="00t0/00t000000022000000.htm#ESRI_SECTION3_5296A2CFF7454314B4F87B118DD38240" href="00t0/00t000000022000000.htm#ESRI_SECTION3_5296A2CFF7454314B4F87B118DD38240">Define how elements are indexed for search</a></li>
						<li purpose="li" id="LI_1E7108591187490EA75C87E37A4BB59B"><a class="xref" rel="00t0/00t000000022000000.htm#ESRI_SECTION3_2849A0BF9E4E445CB621C74C9FD066CB" href="00t0/00t000000022000000.htm#ESRI_SECTION3_2849A0BF9E4E445CB621C74C9FD066CB">Update schemas.xml</a></li><li purpose="li" id="LI_4F702E747BDA4BAEACF88B6F315C5F25"><a class="xref" rel="00t0/00t000000022000000.htm#ESRI_SECTION3_C1DB1E9DC13F437394071B0D543C3BAE" href="00t0/00t000000022000000.htm#ESRI_SECTION3_C1DB1E9DC13F437394071B0D543C3BAE">Finishing your profile</a></li>
					</ul></p><div class="section3" id="ESRI_SECTION3_8A3C2C5BEF524279905DAA7023EDA917" purpose="section3"><h4>Develop a plan for your profile</h4><p id="GUID-86E0AC1E-C202-4114-B220-8DAAF50120FD">Before you create a custom profile, it is important to clearly define what will set your new profile apart from the profiles supported with the Geoportal Server by default.  You will need to identify which of the default profiles most closely resembles your customization, and use that profile as a base to modify.  It is critical that you document what new metadata elements will be added to the profile, what elements you are deleting from the profile, and any other changes you want to make. </p><p id="GUID-BD7335F6-94FC-49A0-93BE-25A573709BDA">After you've developed and documented a plan for the profile, you will need to identify obligation rules for the supported metadata elements.  Obligation rules identify what is mandatory for the resource to be published in your geoportal. If a publisher attempts to publish metadata that does not contain information for a mandatory value, the document will fail validation and will not be published.  Create a document that lists what elements will be mandatory, which will be optional, and which will be conditionally optional (optional unless the section is activated, for example, a browse graphic filename may become mandatory when the browse graphic section is enabled, but is optional if not enabled).</p><p id="GUID-7643C366-712A-43BA-B94F-70B7423B8364">After you've identified what elements your profile will support and the obligation rules for these elements, it is important to identify the metadata XML's xpaths for all new elements to be added. If you are using an existing standard for reference, then consult the standard's documentation to get the standard xpaths. If you are defining your own that is not based on a standard, you will have to decide on an xpath convention that suits your needs.</p><p id="GUID-2B48AC10-DE3F-4E22-8B60-C46A504A7FDB">After you've verified the xpaths for the metadata elements, you will need to design the metadata editor interface for your profile. This design will be implemented by your definition.xml file.     At this step, decide how to group the items you want to include, what sections will appear in what order, and what dropdown boxes, checkboxes, radios, or text fields you want to use.  It is important to look at the profile you identified as most like your desired profile as a base.  Login to the geoportal as a publisher, and go to the metadata editor page for that profile.   Note what design elements are pleasing and functional on that page, and note where the order of sections or elements will need to be updated, changed, or deleted for your profile.  This same form will define how the <span class="uicontrol">Details</span> page looks for resources discovered from the geoportal search page.</p></div><div class="section3" id="ESRI_SECTION3_99354D0A04FE4BFDB9C72C50EC575718" purpose="section3"><h4>Copy the required files</h4><p id="GUID-F8A17B36-503E-4738-84B9-1E0BA05603FB">Now that you have a plan for your profile, you will need to create the files to support it.  Start by navigating to the <i>\\geoportal\WEB-INF\classes\gpt\metadata\</i> folder and making a copy of the template.xml, definition.xml, and indexables.xml file that most closely matches what you desire for your custom profile. Rename the copied files with a prefix that distinguishes your profile from the others in the geoportal.</p></div><div class="section3" id="ESRI_SECTION3_7963BCB64B5F4E68B0E0E54FA03D35AB" purpose="section3"><h4>Update your template.xml file</h4><p id="GUID-70CBCA29-FBA4-4E7E-88A6-3F9F3B5A065D">The template.xml file is a skeleton metadata document that gets populated with the information the publisher enters into the online form. Your template.xml file will look like an output metadata XML document, except that its tags are not populated. In general, most of the elements in your template.xml file will be empty, except in the case where namespace validation rules require text values to be present. An example of a snippet from a template.xml file where the element must be populated is shown for the <i>CI_RoleCode</i> codeList element below. <pre class="lines" purpose="lines">&lt;role&gt;
&lt;CI_RoleCode codeList="<b>http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_RoleCode" codeListValue="custodian"</b>/&gt;
&lt;/role&gt;</pre>You will need to open your template.xml file for your profile in a text or XML editor, and update it to include XML tags at the correct xpath locations for the new elements that you planned to add. You will also need to delete the elements that you do not want to support from the template.xml file. Make sure that the content within the metadata elements is left empty, except in cases where the namespace requires a placeholder element to be present.</p></div><div class="section3" id="ESRI_SECTION3_07E37D5774B847A6AB50EC530B2F3C4C" purpose="section3"><h4>Update your definition.xml file</h4><p id="GUID-57C36983-8A68-432E-9FC1-14331BEE0236">The <i>definition.xml</i> file is used to define how the metadata creation form for your profile appears, the validation rules for metadata published that conforms to your profile, the Details page for resource search results, and maps the  information input by the publisher in the metadata creation form to the template.xml file to create an output metadata document.  To update the definition.xml file, open your definition.xml file in a text or XML editor.  Also open the  <i>sample-schema.xml</i> file from the <i>\\geoportal\WEB-INF\classes\gpt\metadata</i> folder.  Study the sample-schema.xml file carefully, as it outlines what attributes should be assigned to the parameters in your definition.xml file.  Now, update your definition.xml file by removing the parameters that map to the elements you removed from your template.xml file, and adding parameters that correspond to the elements you added to your template.xml file.  Notice that there are sections defined in the definition.xml file. Rearrange the sections to correspond to the plan you made earlier for your metadata editor interface.  Other parts of the definition.xml file that will need to be adjusted are discussed below.<ul purpose="ul" id="UL_76F2FB0EB028451798DA8839328D554F"><li purpose="li" id="LI_6FE9359FDF674465A9313AFD0750D3C0"><b>Obligation rules:</b> Reference the Obligation rules that wrote out earlier, which defined which elements should be mandatory and which ones optional or conditional optional.  Set the parameters' obligation rules using the <span class="usertext">&lt;validation required=""/&gt;</span> attribute for each parameter.</li><li purpose="li" id="LI_CF7532A8CCC54E9689B915E186C91E85"><b>The templateFile attribute:</b> At the top of the definition.xml file, you will see a <span class="usertext">&lt;schema&gt;</span> tag. Within that tag, there is a  <span class="usertext">templateFile</span> attribute.  Update this attribute to reference the name of the template file for your profile.</li><li purpose="li" id="LI_DA999191C42040F1B96715E7902963B1"><b>Interrogation rules:</b> Near the top of the definition.xml file is another important tag, called <span class="usertext">&lt;interrogation&gt;</span>. The information in this tag is used to identify if a metadata document conforms to this profile.  It is very important that the <span class="usertext">count</span> attribute in this tag can uniquely identify records that conform to your profile.  It would be unwise to define an interrogation that counts the presence of common metadata elements such as a title or an abstract, as many metadata profiles use the same xpaths for these metadata elements.  The best interrogations include an xpath that is mandatory according to your profile's obligation rules, but not present in other metadata profiles.  For example, the ISO standard for services - ISO 19119 - uses the following as its interrogation, as other profiles will likely not have <span class="usertext">srv:SV_ServiceIdentification</span> metadata elements:<pre class="lines" purpose="lines">&lt;interrogation count="count(/gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification)"/&gt;</pre>Carefully craft an interrogation that counts the presence of a mandatory element unique to your profile.  This allows the geoportal to correctly identify metadata records published that conform to your profile.</li><li purpose="li" id="LI_774D84A26DDF4A2AB3BDF576DB686604"><b>Hints for users filling out the form:</b> You may want to provide descriptions for the input fields that appear on the metadata editor interface for your profile. These descriptions - hints - help users know what information is expected at that field in the form. They are defined in the  <span class="usertext">hintMode</span> attribute in the <span class="usertext">&lt;input&gt;</span> tag within the <span class="usertext">&lt;parameter&gt;</span>. Hint text is referenced by a bean in the <i>gpt.properties</i> file,
and in a<i>hintResourceKey</i> attribute for the parameter's input.  There are three different ways to define hints, each described below.  <div class="notes" id="GUID-AC847FB7-05C6-4F24-9370-D5E38B90B5C9"><div class="tip"><img class="note_img" src="rsrc/tip.png" alt="Tip" title="Tip"><span>Tip:</span></div><div class="tipbody"><p id="GUID-9E17D132-9F44-46C2-B8E4-8EA9786B5480">In these examples, the
input type is <span class="usertext">text</span>, but hints can be provided for any type of
input.
</p></div></div><ul purpose="ul" id="UL_30762041F7AE4B81AF1233218F8A4408">
									<li purpose="li" id="LI_14A5918F43394548A2B2CA53DA444AD4"><b>
inline</b>: displays the hint as text to the
right of the input field.
Example:<pre class="lines" purpose="lines">&lt;input type="text" hintResourceKey="catalog.general.sample.hint1" hintMode="inline"/&gt;</pre></li>
									<li purpose="li" id="LI_73BEDD22C66C42A6BFB5B06A90B73DEC">
										<b>tip</b>: displays the hint as text that appears
when the user hovers the mouse over the input field.
Example:<pre class="lines" purpose="lines">&lt;input type="text" hintResourceKey="catalog.general.sample.hint2" hintMode="tip"/&gt;</pre></li>
									<li purpose="li" id="LI_E43D49A098DE44B7915FBFC8F1DD8280">
										<b>toggle</b>: displays an icon (called "hint.gif"
in the \\geoportal\catalog\images directory) to the right of the
input field. When the icon is clicked, the hint text appears.
Clicking the icon a second time hides the hint text.
Example:<pre class="lines" purpose="lines">&lt;input type="text" hintResourceKey="catalog.general.sample.hint3" hintMode="toggle"/&gt;</pre></li>
								</ul></li></ul><div class="notes" id="GUID-81FD2C30-1632-4013-852A-DF461B4C0C1B"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Note" title="Note"><span>Note:</span></div><div class="tipbody"><p id="GUID-54CFD141-65E8-4CBD-BC03-46DE7A0D95F0">Some of your new parameters and hints will need strings that are not available out-of-the-box with the geoportal. We will define the new strings in the next step, but for now just keep a list of the new strings you need to add, and where they are located in the definition.xml file.</p></div></div></p></div><div class="section3" id="ESRI_SECTION3_B150412626794FCC8A14858B23810B20" purpose="section3"><h4>Update gpt.properties </h4><p id="GUID-62CEEE9E-F5D9-4573-89DA-4D2640D5DC7D">The definition.xml file uses key values from the gpt.properties file to reference labels that appear on the metadata editor interface and <span class="uicontrol">Details</span> page. Storing values in gpt.properties keeps track of the labels and facilitates translating the geoportal into other languages. Also, gpt.properties allows users to handle all user interface text changes in one file change, instead of searching through all the geoportal web application files to find where a certain string should be updated.</p><p id="GUID-4F81EC83-A781-42A7-96E6-487272BFE328">  Open the gpt.properties file from the <i>\\geoportal\WEB-INF\classes\gpt\resources</i> directory.  The structure of the file follows a bean-value syntax, described in <a class="xref" rel="00t0/00t000000015000000.htm#ESRI_SECTION2_8E2718F8BC7946FEA7347934D0A94F6E" href="00t0/00t000000015000000.htm#ESRI_SECTION2_8E2718F8BC7946FEA7347934D0A94F6E">Look and Feel of the User-Interface</a>. You will need to add the new labels you identified while updating the definition.xml file  for reference in gpt.properties.  There are no requirements for naming conventions for the keys and values in gpt.properties, except that each key must be unique and begin with the word 'catalog'. <b>Note:</b> begining your bean name with the word 'catalog' is critical; if you do not, the associated string text will not appear in the geoportal user interface.  It is recommended to reuse existing keys if possible.</p></div><div class="section3" id="ESRI_SECTION3_5296A2CFF7454314B4F87B118DD38240" purpose="section3"><h4>Define how elements are indexed for search</h4><p id="GUID-AC00B5EB-2A5A-4AB3-AABC-41A9D5EDD792">When a user defines search criteria in the geoportal search page, the geoportal uses the lucene index to match the search criteria to metadata documents that meet that criteria.  The index is defined by telling the geoportal in which metadata elements to look for certain information.  For your profile, you will want certain metadata elements indexed for search.  The <i>indexables.xml</i> file is used with the property meanings file to create the mapping between the metadata elements in your <i>definition.xml</i> file and the way they should be indexed. The <i>indexables.xml</i> file is called when a metadata document has been approved for search by a geoportal administrator user. You may need to update the <i>indexables.xml</i> file for your profile to index new elements that you have added. Please refer to <a class="xref" rel="00t0/00t00000003n000000.htm" href="00t0/00t00000003n000000.htm">Details of Lucene Indexing in the Geoportal</a> for information on how the geoportal indexes terms and how to customize the meaning attributes.</p></div><div class="section3" id="ESRI_SECTION3_2849A0BF9E4E445CB621C74C9FD066CB" purpose="section3"><h4>Update schemas.xml</h4><p id="GUID-535E3825-94E0-4E43-A22D-5F9C991DEFBC">When the <span class="uicontrol">Use dedicated editor to create metadata manually</span> radio button is selected from <span class="uicontrol">Add</span> page, the <span class="uicontrol">Create Metadata</span> page loads, listing the available metadata profiles from which a publisher user can choose. This listing comes from  the <i>schemas.xml</i> file.   The geoportal also uses the <i>schemas.xml</i> file to identify to what profile an uploaded metadata record conforms. The geoportal interrogates the uploaded record according to the interrogation rules for each profile listed in the <i>schemas.xml</i> file, in the order they are listed.  When the interrogation rules match the uploaded document, the geoportal stops interrogating and validates that record based on the validation rules set in that profile's <i>definition.xml</i> file.  Thus, you see that the order of the profiles listed in <i>schemas.xml</i> is very important. If you have a more general interrogation rule defined in one of the metadata profiles, you will want to list that profile after you list a more specifically defined profile. For example, the interrogation rule for an ISO 19115 profile by default is <span class="usertext">&lt;interrogation count="count(/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification)"/&gt;</span>.  Any uploaded metadata document that has metadata at the <span class="usertext">MD_DataIdentification</span> element will be classified as ISO 19115.   INSPIRE metadata documents contain this element, and so do North American Profile documents.  Therefore the ISO 19115 profile should be listed after INSPIRE and North American Profile in the <i>schemas.xml</i> file, so INSPIRE or North American Profile metadata documents can be identified by the unique INSPIRE or North American Profile interrogation rules before being interrogated as a more general ISO 19115 document. </p><p id="GUID-54A22C1D-1D89-416E-AF3E-835DD2ED494A"> You will need to  update the <i>schemas.xml</i> file to support your new profile.  Delete from <i>schemas.xml </i>any profiles that you do not want to support, knowing that metadata documents that conform to those profiles will fail publishing when uploaded to your geoportal.  Now, add a  line  to the <i>schemas.xml</i> file that directs to your profile's <i>definition.xml</i> file.   Consider where you add the line for your supported profile in relation to the interrogation rules of the other profiles supported in your geoportal. <div class="notes" id="GUID-51B4E547-24FA-4151-B0E9-E18F19AA832D"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Note" title="Note"><span>Note:</span></div><div class="tipbody"><p id="GUID-C36021CE-9F3C-492E-9613-35945F8620D2">You will notice that there are definition file references in <i>schemas.xml</i> that are not associated with a template file. For example, in schemas.xml there is a reference to the   opensearch-definition.xml file, in the \\gpt\metadata\other directory. If you open the opensearch-definition.xml file in a text editor, you notice that there is no reference to a template file. This is the same for the georss-definition.xml file which is also in that same directory.  These files are used to generate metadata when the "Register a network resource" publish method is chosen. Instead of a template.xml file, an xslt transformation is applied. In these cases, the default transformation is to Dublin Core, using the file opensearch-toDC.xslt or georss-toDC.xslt.  A similar tranformation is applied when OGC GetCapabilities documents are transformed into discoverable metadata for viewing in the geoportal web interface. The transformations for the OGC  GetCapabilities documents are found in the \\gpt\metadata\ogc directory.</p><p id="GUID-3FAA4F53-18D3-420C-8116-D8F8C23D414F">Using transformations, is possible to transform resources into any XML structure, not just formal metadata such as ISO, FGDC, or Dublin Core.</p></div></div></p></div><div class="section3" id="ESRI_SECTION3_C1DB1E9DC13F437394071B0D543C3BAE" purpose="section3"><h4>Finishing your profile</h4><p id="GUID-5DAAA338-9995-477F-9687-E8573B106627">When you have updated the template.xml, definition.xml, gpt.properties, indexables.xml, and schemas.xml files, make sure to save them all.  Then restart your geoportal web application and launch a new instance of your geoportal. Your custom standard should now be available for publishers to create metadata that conforms to your organization's specifications.</p></div></div></div>
	<br><div class="footer"> Copyright © 1995-2010 Esri. All rights reserved. </div></div></body></html>
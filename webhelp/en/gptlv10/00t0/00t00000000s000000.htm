<html lang="en" xml:lang="en"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Integrate a Map Viewer Integrate a Map Viewer An external map viewing application is not necessary for full geoportal functionality, as live services can be readily viewed from the built-in Previewer that comes with the geoportal. However, if your organization would like to implement a map viewing application, the Geoportal can be configured to support your viewer. However, you may need to write a class in order to add your custom map viewer. Currently the Geoportal has the class to support Add to Map functionality for the Flex based map viewer. This allows users to see an Add to Map link for"><meta name="content-language" content="en"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>Geoportal Server - Integrate a Map Viewer</title><script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".html");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    self.location.replace ("../index.html#//" + fname);
                </script></head><!--Publication GUID: [GUID-4DA02BE7-AD9D-4B8F-8F2F-03A1389F0D20]--><!--Topic GUID: [GUID-1D28CC2B-5F5E-4DA2-857E-3CE6FF0FE169]--><body><div id="content"><div class="header"><h1>Integrate a Map Viewer</h1><div id="breadcrumb"></div></div>
		<div class="section1" id="GUID-B5BD6711-0BBA-4033-8755-DEFF8063CDE8" purpose="section1"><h2>Integrate a Map Viewer</h2><p id="GUID-D051F0A6-689E-4D00-82CB-316D0434CC2A"> An external map viewing application is not necessary for full geoportal functionality, as live services can be readily viewed from the built-in  <a class="xref" rel="00t0/00t00000004p000000.htm" href="00t0/00t00000004p000000.htm">Previewer</a>  that comes with the geoportal. However, if your organization would like to implement a map viewing application, the geoportal can be configured to support your viewer. However, you may need to write a class in order to add your custom map viewer. Currently the geoportal has the class to support <span class="uicontrol">Add to Map</span> functionality for the Flex based map viewer.  This allows users to see an <span class="uicontrol">Add to Map</span> link for live services search results, and launch the service in the Flex based Map Viewer.  The instructions to configure the link to launch the map viewer and the <span class="uicontrol">Add to Map</span> functionality are described below.  For instructions on how to add the Geoportal Search Widget to your existing Flex or Silverlight map viewer, see instructions in the <a class="xref" rel="00t0/00t00000002v000000.htm#GUID-B6108B7C-772B-4EF4-B8EA-F6D463FB111D" href="00t0/00t00000002v000000.htm#GUID-B6108B7C-772B-4EF4-B8EA-F6D463FB111D">Geoportal Search Widget for Flex</a> or <a class="xref" rel="00t0/00t000000042000000.htm#GUID-B6108B7C-772B-4EF4-B8EA-F6D463FB111D" href="00t0/00t000000042000000.htm#GUID-B6108B7C-772B-4EF4-B8EA-F6D463FB111D">Geoportal Search Widget for Silverlight</a>  webhelp topics.</p><p id="GUID-5DD94B2B-54F5-463A-8D3D-0CB085FCFD58"> By adding this map viewer link into the <i>gpt.xml</i> file it will expose an <span class="uicontrol">Add to Map</span> link for a search result on the search page and a link labeled <span class="uicontrol">Launch Map Viewer</span> on your geoportal main menu. The <span class="uicontrol">Add to Map</span> functionality depends on the implementation of the supporting class. For example out of the box, there is a class called <i>com.esri.gpt.catalog.search.MapViewerFlex</i> which supports adding ArcIMS, ArcGIS Server REST services, OGC WMS, and GeoRSS to a Flex based map viewer application. The steps below describe how to enable this functionality.<ol purpose="ol" id="GUID-94EF5A43-78FA-44D4-B440-7131784269B2">
					<li purpose="li" id="LI_B38E91C3C89B4413B974C05BBE65D3EE">Open the <i>gpt.xml</i> file.</li><li purpose="li" id="LI_66E337BADCB14EA8A18858D2C6B45807">Find the instance URL attribute of the <span class="uicontrol">&lt;mapviewer&gt;</span> element.</li><li purpose="li" id="LI_DDEEA3AC490141F4B784BA99E228BBDE">Input the URL to your map viewer application in the instance URL element.<div class="notes" id="GUID-419A326E-9D83-4BD0-8734-1F1CC15882F3"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Note" title="Note"><span>Note:</span></div><div class="tipbody"><p id="GUID-C6F57237-DEFC-4740-B362-8635603AEB6E">The example below uses a Flex based map viewer. </p></div></div><div class="codeblock" purpose="codeblock"><pre class="codeblockbody" id="GUID-FDF8C7A1-2622-42AC-87FE-9BA53266CA86" purpose="codeblockbody">&lt;mapviewer&gt;
&lt;instance url="http://server/geoportal/Flexviewer/index.html"
className="com.esri.gpt.catalog.search.MapViewerFlex"&gt;
&lt;parameter key="width" value="1000"/&gt;
&lt;parameter key="height" value="700"/&gt;
&lt;parameter key="regexCanConsumeUrl" value=""/&gt;
&lt;/instance&gt;
&lt;/mapViewer&gt;</pre></div>
						<ul purpose="ul" id="UL_438339BD77EF4D2198B5AF3865729292">
							<li purpose="li" id="GUID-B8EEF1B6-D113-4C01-878E-65BFB6F66205">instance url = the URL of the map viewer application (mandatory)</li>
							<li purpose="li" id="GUID-A5DA5034-FCDB-43C6-BF83-F9A32312CF4E">className = class name of the map viewer instance  (mandatory)<div class="notes" id="GUID-64AD9590-6AEB-47E7-9533-7912425AE2F0"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Note" title="Note"><span>Note:</span></div><div class="tipbody"><p id="GUID-3ECFAD6B-A589-4A3C-98BC-3CBD99BC7C22">The className must be in the same domain and port in order for layering of resources to work.</p></div></div></li>
							<li purpose="li" id="GUID-6C6A4172-E5C5-4C3E-BC90-312989845089">width = width of the map viewer application  (particular to the FlexMapViewer class)</li>
							<li purpose="li" id="GUID-C89663B2-5225-49FA-B749-10789E33D68A">height = height of the map viewer application  (particular to the FlexMapViewer class)</li>
							<li purpose="li" id="GUID-9A195ABC-72C6-44D4-B1ED-46BD58530E6A">regexCanConsumeUrl = regular expression to enable the 'add to map' link for other file formats (particular to the FlexMapViewer class). Additional formats would require some customization. An example of how to complete the regular expression section is provided below. <div class="codeblock" purpose="codeblock"><pre class="codeblockbody" id="GUID-D8CB7148-F43D-4029-A27E-15281616CCBA" purpose="codeblockbody"> &lt;parameter key="regexCanConsumeUrl" value="*.zip|*.rar"/&gt;</pre></div></li>
						</ul></li>
					<li purpose="li" id="LI_AE5F38EFF78E4D2099E7209923BF3590">Save the <i>gpt.xml</i> file.</li><li purpose="li" id="LI_74F186A57114420897BBBAA72F44E3E6">Restart the geoportal web application.</li>
				</ol>
			</p></div>
	<br><div class="footer"> Copyright © 1995-2010 Esri. All rights reserved. </div></div></body></html>